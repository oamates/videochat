<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_cn" lang="zh_cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Demo Publisher</title>
    <style type="text/css" media="screen"> 
        html, body  { height:100%; }
        body { margin:0; padding:0; overflow:auto; text-align:center; 
               background-color: #ffffff; }   
        object:focus { outline:none; }
        #myCamera { display:block;text-align:left; }
        #videoList {margin:10px;}
        #videoList > object {padding:10px;}
    </style>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="swfobject.js"></script>
    <script type="text/javascript">

        var params = {
            quality: "high",
            bgcolor: "#ffffff",
            allowscriptaccess: "sameDomain",
            allowfullscreen: "true"
        };

        $(document).ready(function(){
            
            $('#btnPublish').click(function(ev){
                ev.preventDefault();
                var uid = $('#UID').val();

                swfobject.embedSWF(
                    "Producer.swf", "myCamera", 
                    "320", "240", 
                    "11.1.0", "playerProductInstall.swf", 
                    { host: '183.203.16.207', port: 8108, uid: uid }, params, { id:"Producer", name: "Producer" });
                    
                $('#mySetting').hide();
                $('#myView').show();
            });
            
            $('#btnLive').click(function(ev){
                ev.preventDefault();
                var uid = $('#liveUID').val();
                
                var id = 'consumer_' + Math.ceil(Math.random() * 100000);
                
                $('#videoList').append(
                    $('<div class="consumer" />').append($('<div />').attr('id', id)));
                
                swfobject.embedSWF(
                    "Consumer.swf", id,
                    "320", "240", 
                    "11.1.0", "playerProductInstall.swf", 
                    { host: '183.203.16.207', port: 8108, uid: uid }, params, {id:id, name:'Consumer'});
                
            });
            
        });
    </script>
</head>
<body bgcolor="#ffffff">

    <div id="mySetting">
        <label for="UID">用户ID：<input type="text" id="UID" name="UID" value="user1" /></label>&nbsp;<a href="#" id="btnPublish">开始直播</a>
    </div>

    <div id="myView" class="producer" style="display:none;">
        <div id="myCamera">
            <p>
                To view this page ensure that Adobe Flash Player version 
                11.0.0 or greater is installed. 
            </p>
            <script type="text/javascript"> 
                var pageHost = ((document.location.protocol == "https:") ? "https://" : "http://"); 
                document.write("<a href='http://www.adobe.com/go/getflashplayer'><img src='" 
                                + pageHost + "www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a>" ); 
            </script> 
        </div>
    </div>
    
    <div id="userList">
        <label for="liveUID">用户ID：<input type="text" id="liveUID" name="liveUID" value="user1" /></label>&nbsp;<a href="#" id="btnLive">查看直播</a>
    </div>

    <div id="videoList">
    </div>
    
</body>
</html>